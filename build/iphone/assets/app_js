Ti.include("variables.js"),Ti.include("functions.js"),Ti.include("js/mmp_datetime.min.js"),orientation=Titanium.Platform.displayCaps.platformWidth<Titanium.Platform.displayCaps.platformHeight?"portrait":"landscape",help_WindowSwitcher(),webview.removeEventListener("beforeload",function(){}),webview.addEventListener("beforeload",function(){webview.evalJS("var start='"+start+"';"),webview.evalJS("var HTMLorientation='"+orientation+"';");var e=Titanium.App.Properties.getString("Master_Setting_Help_Tabs",!0);webview.evalJS("var FPhelp='"+e+"';"),start=0;var t=Titanium.App.Properties.getInt("HeightP",0),i=Titanium.App.Properties.getInt("HeightL",0),n=Titanium.App.Properties.getInt("WidthP",0),a=Titanium.App.Properties.getInt("WidthL",0),r=Titanium.App.Properties.getInt("GapP",0),o=Titanium.App.Properties.getInt("GapL",0),s=Titanium.App.Properties.getInt("UpDwnP",0),p=Titanium.App.Properties.getInt("UpDwnL",0),l=Titanium.App.Properties.getInt("LRposP",0),d=Titanium.App.Properties.getInt("LRposL",0),c=Titanium.App.Properties.getInt("TwistP",0),w=Titanium.App.Properties.getInt("TwistL",0);webview.evalJS("var HeightP='"+t+"';"),webview.evalJS("var HeightL='"+i+"';"),webview.evalJS("var WidthP='"+n+"';"),webview.evalJS("var WidthL='"+a+"';"),webview.evalJS("var GapP='"+r+"';"),webview.evalJS("var GapL='"+o+"';"),webview.evalJS("var UpDwnP='"+s+"';"),webview.evalJS("var UpDwnL='"+p+"';"),webview.evalJS("var TwistP='"+c+"';"),webview.evalJS("var TwistL='"+w+"';"),webview.evalJS("var LRposP='"+l+"';"),webview.evalJS("var LRposL='"+d+"';")}),recover_settings(),Ti.App.addEventListener("app:HeightPtrigger",function(e){Titanium.App.Properties.setInt("HeightP",e.HeightP)}),Ti.App.addEventListener("app:HeightLtrigger",function(e){Titanium.App.Properties.setInt("HeightL",e.HeightL)}),Ti.App.addEventListener("app:WidthPtrigger",function(e){Titanium.App.Properties.setInt("WidthP",e.WidthP)}),Ti.App.addEventListener("app:WidthLtrigger",function(e){Titanium.App.Properties.setInt("WidthL",e.WidthL)}),Ti.App.addEventListener("app:GapPtrigger",function(e){Titanium.App.Properties.setInt("GapP",e.GapP)}),Ti.App.addEventListener("app:GapLtrigger",function(e){Titanium.App.Properties.setInt("GapL",e.GapL)}),Ti.App.addEventListener("app:UpDwnPtrigger",function(e){Titanium.App.Properties.setInt("UpDwnP",e.UpDwnP)}),Ti.App.addEventListener("app:UpDwnLtrigger",function(e){Titanium.App.Properties.setInt("UpDwnL",e.UpDwnL)}),Ti.App.addEventListener("app:LRposPtrigger",function(e){Titanium.App.Properties.setInt("LRposP",e.LRposP)}),Ti.App.addEventListener("app:LRposLtrigger",function(e){Titanium.App.Properties.setInt("LRposL",e.LRposL)}),Ti.App.addEventListener("app:TwistPtrigger",function(e){Titanium.App.Properties.setInt("TwistP",e.TwistP)}),Ti.App.addEventListener("app:TwistLtrigger",function(e){Titanium.App.Properties.setInt("TwistL",e.TwistL)}),Ti.App.removeEventListener("Handedness",function(){}),DoOrientation(),Ti.App.addEventListener("Handedness",function(e){LRH=e.LRH,set_orientation_variables(orientation)}),removeChildrens(win1),removeChildrens(win3),help_bigWindowSwitch(),win1.add(smallHelpView),win1.add(webview),win1.add(view),setSettings(),Ti.App.removeEventListener("do_reset",function(){}),Ti.App.addEventListener("do_reset",function(){getOrientation(),Titanium.App.Properties.setString("email_to_setting",aTextField.value),help_LettersSwitch(),help_bigWindowSwitch(),Ti.App.fireEvent("webviewEvent",{text:""})}),help_WindowSwitcher(),win1.open(),view.show(),win1.add(settingsButton),win1.add(helpButton),win1.add(clearButton),win1.add(emailButton),win1.add(copyButton),win1.add(pasteButton),win1.add(timeStampButton),top_view.add(aTextField),win1.add(top_view),top_view.add(aTrailer),win1.add(aTrailer),win1.add(version_label),win1.add(PrivacyTitle),1==help_windowSwitch.value?(smallHelpView.show(),view.height=720):(smallHelpView.hide(),view.height=720),help_WindowSwitcher(),smallHelpView.add(smallHelpimages),emailButton.removeEventListener("click",emailCurrentText),clearButton.removeEventListener("click",clearTextFromClipboard),ReviewButton.removeEventListener("click",viewLastText),timeStampButton.removeEventListener("click",timeStamp),copyButton.removeEventListener("click",copyTextToClipboard),pasteButton.removeEventListener("click",pasteTextFromClipboard),openWebsiteButton.removeEventListener("click",openWebsiteButtonAction),help_BIGwindowSwitch.removeEventListener("change",help_bigWindowSwitch),emailButton.addEventListener("click",emailCurrentText),clearButton.addEventListener("click",clearTextFromClipboard),ReviewButton.addEventListener("click",viewLastText),timeStampButton.addEventListener("click",timeStamp),copyButton.addEventListener("click",copyTextToClipboard),pasteButton.addEventListener("click",pasteTextFromClipboard),openWebsiteButton.addEventListener("click",openWebsiteButtonAction),help_BIGwindowSwitch.addEventListener("change",help_bigWindowSwitch),helpButton.removeEventListener("click",function(){});var a=Titanium.UI.createAnimation();a.height=Ti.UI.FILL,a.width=Ti.UI.FILL,a.duration=300,helpButton.addEventListener("click",function(){win3.add(Continue_Siwriting),win3.add(SiWriter_help_win),a.height=Ti.UI.FILL,a.width=Ti.UI.FILL,a.duration=300,win3.open(a)}),close.removeEventListener("click",function(){}),close.addEventListener("click",function(){win3.remove(Continue_Siwriting),win3.remove(SiWriter_help_win),a.height=0,a.width=Ti.UI.FILL,win3.close(a),help_WindowSwitcher()}),get_MasterSettings(),Ti.Gesture.removeEventListener("orientationchange",function(){}),Ti.Gesture.addEventListener("orientationchange",function(e){return orientation=getOrientation(e.orientation),Ti.App.fireEvent("app:orientation",{orientation:orientation}),set_orientation_variables(orientation),orientation}),CheckEmailaddress(),""==aTextField.value&&(aTextField.value="Set a default email"),view.add(txtViewDesc),view.show();var copy="";Ti.App.removeEventListener("webviewEvent",function(){}),Ti.App.addEventListener("webviewEvent",function(e){switch("\b_"==e.text&&(e.text="",contentTyped=contentTyped.slice(0,-1),whole_sentance=whole_sentance.slice(0,-1),trailer=trailer.slice(0,-1),txtViewDesc.value=contentTyped+"_"),contentTyped.length!=txtViewDesc.value.length-1&&(contentTyped=txtViewDesc.value),1==speech_slider.value&&1==word_sentance_slider.value&&(whole_sentance+=e.text),contentTyped+=e.text,Titanium.App.keyboardVisible||(txtViewDesc.value=contentTyped+"_"),trailer=trailer.slice(-23)+e.text,aTrailer.value=trailer+"_",1==speech_slider.value&&(ws=1==word_sentance_slider.value?"sentance":"word",do_speech(ws,e.text,whole_sentance)),e.text){case".":case"!":case"?":whole_sentance=""}}),settingsButton.removeEventListener("click",function(){}),settingsButton.addEventListener("click",function(){return 0==setbutton?(setbutton=1,win1.add(toolbar),win1.add(bottomtoolbar),void(speech_slider.value?win1.add(speech_toolbar):win1.remove(speech_toolbar))):void(1==setbutton&&(setbutton=0,win1.remove(toolbar),win1.remove(bottomtoolbar),win1.remove(speech_toolbar)))}),speech_slider.addEventListener("change",function(){speech_slider.value?win1.add(speech_toolbar):win1.remove(speech_toolbar)}),btnChoosePhoto.removeEventListener("click",function(){}),btnChoosePhoto.addEventListener("click",function(){Titanium.Media.openPhotoGallery({success:function(e){Ti.API.debug("Our type was: "+e.mediaType),e.mediaType==Ti.Media.MEDIA_TYPE_PHOTO&&(image=e.media,saveBackgroundImage(image))},cancel:function(){},error:function(e){Ti.API.error(e)},mediaTypes:[Ti.Media.MEDIA_TYPE_PHOTO]})}),btnTakePhoto.removeEventListener("click",function(){}),btnTakePhoto.addEventListener("click",function(){Titanium.Media.showCamera({success:function(e){var t=e.media;e.mediaType==Ti.Media.MEDIA_TYPE_PHOTO&&(Ti.App.Properties.setString("image",t.nativePath),saveBackgroundImage(t))},cancel:function(){},error:function(e){var t=Titanium.UI.createAlertDialog({title:"Camera"});t.setMessage(e.code==Titanium.Media.NO_CAMERA?"Device does not have camera":"Unexpected error: "+e.code),t.show()},allowImageEditing:!0,saveToPhotoGallery:!0})}),help_BIGwindowSwitch.addEventListener("change",function(){smallHelpimages.image=1==help_BIGwindowSwitch.value?"/images/BIGAllCodes2.png":"/images/AllCodes.png"}),Ti.App.addEventListener("sizer_switched_off",function(){sizer_switch_slider.value=!1}),sizer_switch_slider.removeEventListener("change",function(){}),Ti.App.addEventListener("help_switched_off",function(){help_lettersSwitch.value=!1}),sizer_switch_slider.addEventListener("change",function(){Ti.App.fireEvent("sizer_switch_change",{slider:sizer_switch_slider.value})}),HBWS=Titanium.App.Properties.getString("Master_Setting_Big_Help"),help_BIGwindowSwitch.value=HBWS,HelpWS=Titanium.App.Properties.getString("Master_Setting_Window_Switch"),help_windowSwitch.value=HelpWS,help_lettersSwitch.removeEventListener("change",function(){}),help_lettersSwitch.addEventListener("change",function(){Ti.App.fireEvent("help_lettersSwitch_change",{FPhelp:help_lettersSwitch.value})}),help_windowSwitch.removeEventListener("change",help_WindowSwitcher),help_windowSwitch.addEventListener("change",function(){1==help_windowSwitch.value?(smallHelpView.show(),view.height=720):(smallHelpView.hide(),view.height=720),help_WindowSwitcher()}),Ti.include("text_to_speech.js");