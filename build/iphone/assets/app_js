function recover_settings(){Ti.API.info("recover_settings -STARTS");for(var e=0;e<props.length;e++){var t=Titanium.App.Properties.getString(props[e]);if(0==t&&(setting=!1),1==t&&(setting=!0),Titanium.API.info(props[e]+" = "+t),"Master_Setting_Window_Switch"==props[e]&&(help_windowSwitch.value=setting,Ti.App.fireEvent("FPhelp_setting",{FPhelp:setting}),Ti.API.info("Master_Setting_Window_Switch = "+setting)),"Master_Setting_Big_Help"==props[e]&&(help_BIGwindowSwitch.value=setting,Ti.App.fireEvent("help_BIGwindowSwitch_setting",{help_BIGwindowSwitch:setting}),Ti.API.info("Master_Setting_Big_Help = "+setting)),"Master_Setting_Help_Tabs"==props[e]&&(help_lettersSwitch.value=setting,Ti.App.fireEvent("Do_help_lettersSwitch",{FPhelp:setting}),Ti.API.info("Master_Setting_Help_Tabs = "+setting)),"TwistP"==props[e]){var i=t;Ti.App.fireEvent("From_Settings_Twist",{TwistP:i})}if("TwistL"==props[e]){var n=t;Ti.App.fireEvent("From_Settings_Twist",{TwistL:n})}if("LR_posP"==props[e]);if("LR_posL"==props[e]);if("UpDwnL"==props[e]);if("UpDwnP"==props[e]);if("HeightP"==props[e]);if("HeightL"==props[e]){var o=t;alert("HeightL="+o)}if("WidthP"==props[e]);if("WidthL"==props[e]);if("GapP"==props[e]);if("GapL"==props[e]);if("FPPDisplay"==props[e]);if("FPhelp"==props[e]);}Ti.API.info("recover_settings -For Next ENDS"),1==start&&(Ti.App.fireEvent("initialise"),start=!1),DoOrientation()}function missedKeypad(){Ti.Media.vibrate(),alert("missed")}function setup_buttons(){}function DoOrientation(){var e=Ti.Platform.displayCaps.platformWidth,t=Ti.Platform.displayCaps.platformHeight;if(e>t){var i="landscape";orientation="landscape"}else{var i="portrait";orientation="portrait"}"portrait"==i&&portrait(),"landscape"==i&&landscape();var n=Titanium.Platform.getModel();return Ti.API.info("Titanium.Platform !!!!!! THIS IS ME !!!!!!!!!!!!!!!! = "+n),Ti.API.info("-- FileSaver 157 --------------------static sensor----------------------------orientation: "+orientation),i}function getOrientation(e){switch(oldOrientation=orientation,e){case Titanium.UI.PORTRAIT:return"portrait";case Titanium.UI.UPSIDE_PORTRAIT:return"portrait";case Titanium.UI.LANDSCAPE_LEFT:return"landscape";case Titanium.UI.LANDSCAPE_RIGHT:return"landscape";default:return oldOrientation}}function portrait(){buttonvariablesPortrait()}function landscape(){buttonvariablesLandscape()}function copyTextToClipboard(){"_"==contentTyped?alert("Nothing to copy"):Ti.UI.Clipboard.setText(contentTyped)}function saveCurrentText(){saved_file=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"SiWriter "+new Date),saved_file.write(save)}function saveBackgroundImage(e){if(DoOrientation(),"portrait"==oriCurrent){var t=Titanium.UI.createAlertDialog({title:"Background image"});t.setMessage("Portrait background updated.")}if("landscape"==oriCurrent){var t=Titanium.UI.createAlertDialog({title:"Background image"});t.setMessage("Background image updated.")}writeFile.exists()&&(delete writefile,t.show()),writeFile.write(e),DoOrientation()}function viewLastText(){}function pasteTextFromClipboard(){Ti.UI.Clipboard.getText()?(contentTyped=contentTyped+Ti.UI.Clipboard.getText()+"_",txtViewDesc.value=contentTyped):alert("Nothing to paste")}function copyTextToClipboard(){"_"==contentTyped?alert("Nothing to copy"):Ti.UI.Clipboard.setText(contentTyped)}function clearTextFromClipboard(){var e=Ti.UI.createAlertDialog({title:"Do you really want to clear the text ?",buttonNames:["Yes","No"]});e.removeEventListener("click",function(){}),e.addEventListener("click",function(e){0==e.index&&(Ti.UI.Clipboard.setText(contentTyped),contentTyped="_",txtViewDesc.value=contentTyped)}),e.show()}function pasteTextFromClipboard(){Ti.UI.Clipboard.getText()?(contentTyped=contentTyped+Ti.UI.Clipboard.getText()+"_",txtViewDesc.value=contentTyped):alert("Nothing to paste")}function timeStamp(){contentTyped=txtViewDesc.value,contentTyped=contentTyped.substring(0,contentTyped.length-1)+"\r"+new Date+"\n\n",txtViewDesc.value=contentTyped}function close_main(){Ti.API.info("close main triggered"),updateSettings(),getOrientation(),Titanium.App.Properties.setString("email_to_setting",aTextField.value),Ti.App.fireEvent("webviewEvent",{text:"  "})}function updateSettings(){help_WindowSwitcher(),help_bigWindowSwitch(),Ti.App.fireEvent("help_lettersSwitch_change"),Ti.API.info("settings updated line 246 FS")}function openWebsiteButtonAction(){Ti.Platform.openURL("http://SiWriter.co.uk")}function removeChildrens(e){for(i in e.children){var t=e.children[0];removeChildrens(t),e.remove(t),t=null}}function help_bigWindowSwitch(){smallHelpimages.image=1==help_BIGwindowSwitch.value?"/images/BIGAllCodes2.png":"/images/AllCodes.png"}function get_MasterSettings(){for(var e=0;e<props.length;e++){var t=Titanium.App.Properties.getString(props[e]);if(0==t&&(setting=!1),1==t&&(setting=!0),Titanium.API.info(props[e]+" = "+t),"email_to_setting"==props[e]&&(aTextField.value=t),"FPPDisplay"==props[e]);"FPhelp"==props[e]}}var SiWriter={},start=1,orientation="null",saved_email_url_file=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"SiWriter_default_email.txt"),saved_file=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"SiWriter.txt"+new Date),last_file=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"SiWriter.txt"+new Date),previous_contents=saved_file.read(),default_email=saved_email_url_file.read(),dir=Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory),contentTyped="",c=0,trailer="",s=0,Nums=0,Caps=0,DEL=0,OS_EDIT=0,help_windowSwitch=null,help_BIGwindowSwitch=!1,help_windowSwitchSetting=null,Master_Setting_Big_Help=!1,angle={},orient="",props=Titanium.App.Properties.listProperties(),Last_Typed_Word="!?!",Review_mode=0,LRposP=0,LRposL=0,KV=!1,temp="",Toggle=!1,Trigger=!1,oldOrientation="",Hide=!0,setbutton=0,oriCurrent="landscape";Ti.API.info(props),Ti.include("KS_email2.js"),Ti.include("buttons.js"),Ti.include("file_saver.js"),Ti.include("toolbar.js"),Ti.include("help.js"),Titanium.App.Properties.setString("version",Ti.App.version);var foo=new Date,build_time=foo.getDate()+"/"+foo.getMonth()+"1/"+foo.getFullYear()+" "+foo.getHours()+":"+foo.getMinutes()+":"+foo.getSeconds();build_label.text=build_time,Titanium.App.Properties.setString("date_of_build","\r"+new Date),CheckEmailaddress();var webview=Titanium.UI.createWebView({backgroundColor:"transparent",url:"Keypad.html",height:"60%",disableBounce:!0}),txtViewDesc=Ti.UI.createTextArea({value:"",top:10,backgroundColor:"transparent",font:{fontSize:16},height:"96%"}),view=Ti.UI.createScrollView({backgroundImage:"images/Sized_Screen_lighter.png",borderRadius:10,top:20,left:20,height:720,font:{fontSize:10},opacity:.9}),win1=Titanium.UI.createWindow({title:"SiWriter 1"+new Date,backgroundImage:"images/bg_image.png",height:"100%",bottom:0});Titanium.Platform.displayCaps.platformWidth<Titanium.Platform.displayCaps.platformHeight?(orientation="portrait",Ti.API.info("Launched in PORTRAIT ")):(orientation="landscape",Ti.API.info("Launched in LANDSCAPE ")),webview.removeEventListener("beforeload",function(){}),webview.addEventListener("beforeload",function(){webview.evalJS("var start='"+start+"';"),webview.evalJS("var HTMLorientation='"+orientation+"';");var e=Titanium.App.Properties.getString("Master_Setting_Help_Tabs",!0);webview.evalJS("var FPhelp='"+e+"';"),start=0});var SiWriter_helpView=Titanium.UI.createWebView({backgroundColor:"transparent",url:"help.html",width:"100%",height:"100%",bottom:0,zIndex:0});recover_settings(),DoOrientation(),removeChildrens(win1),removeChildrens(win3),help_bigWindowSwitch(),win1.add(smallHelpView),win1.add(webview),win1.add(view),DoOrientation(),Ti.App.removeEventListener("do_reset",function(){}),Ti.App.addEventListener("do_reset",function(){getOrientation(),Titanium.App.Properties.setString("email_to_setting",aTextField.value),help_WindowSwitcher(),help_LettersSwitch(),help_bigWindowSwitch(),Ti.App.fireEvent("webviewEvent",{text:""})}),help_WindowSwitcher(),win1.open(),view.show(),win1.add(settingsButton),win1.add(helpButton),win1.add(clearButton),win1.add(emailButton),win1.add(copyButton),win1.add(pasteButton),win1.add(timeStampButton),top_view.add(aTextField),win1.add(top_view),top_view.add(aTrailer),win1.add(aTrailer),win1.add(version_label),win1.add(PrivacyTitle),1==help_windowSwitch.value?(smallHelpView.show(),view.height=720):(smallHelpView.hide(),view.height=720),help_WindowSwitcher(),smallHelpView.add(smallHelpimages),emailButton.removeEventListener("click",emailCurrentText),clearButton.removeEventListener("click",clearTextFromClipboard),ReviewButton.removeEventListener("click",viewLastText),timeStampButton.removeEventListener("click",timeStamp),copyButton.removeEventListener("click",copyTextToClipboard),pasteButton.removeEventListener("click",pasteTextFromClipboard),openWebsiteButton.removeEventListener("click",openWebsiteButtonAction),help_BIGwindowSwitch.removeEventListener("change",help_bigWindowSwitch),emailButton.addEventListener("click",emailCurrentText),clearButton.addEventListener("click",clearTextFromClipboard),ReviewButton.addEventListener("click",viewLastText),timeStampButton.addEventListener("click",timeStamp),copyButton.addEventListener("click",copyTextToClipboard),pasteButton.addEventListener("click",pasteTextFromClipboard),openWebsiteButton.addEventListener("click",openWebsiteButtonAction),help_BIGwindowSwitch.addEventListener("change",help_bigWindowSwitch),helpButton.removeEventListener("click",function(){});var a=Titanium.UI.createAnimation();a.height=Ti.UI.FILL,a.width=Ti.UI.FILL,a.duration=300,helpButton.addEventListener("click",function(){win3.add(Continue_Siwriting),win3.add(SiWriter_help_win),a.height=Ti.UI.FILL,a.width=Ti.UI.FILL,a.duration=300,win3.open(a)}),close.removeEventListener("click",function(){}),close.addEventListener("click",function(){win3.remove(Continue_Siwriting),win3.remove(SiWriter_help_win),a.height=0,a.width=Ti.UI.FILL,win3.close(a),help_WindowSwitcher()}),close_main.removeEventListener("click",function(){}),close_main.addEventListener("click",function(){Ti.API.info("Continue_Siwriting_main clicked"),win1.remove(bottomtoolbar),win1.remove(toolbar),setbutton=0}),get_MasterSettings(),Ti.Gesture.removeEventListener("orientationchange",function(){}),Ti.Gesture.addEventListener("orientationchange",function(e){return orientation=getOrientation(e.orientation),Ti.App.fireEvent("app:orientation",{orientation:orientation}),"portrait"==orientation&&portrait(),"landscape"==orientation&&landscape(),Ti.API.info("-- App Line 336 ---------------------------------------------------------orientation: "+orientation),orientation}),CheckEmailaddress(),""==aTextField.value&&(aTextField.value="Set a default email"),view.add(txtViewDesc),view.show();var copy="";Ti.App.removeEventListener("webviewEvent",function(){}),Ti.App.addEventListener("webviewEvent",function(e){"\b_"==e.text&&(e.text="",contentTyped=contentTyped.slice(0,-1),trailer=trailer.slice(0,-1),txtViewDesc.value=contentTyped+"_"),contentTyped.length!=txtViewDesc.value.length-1&&(contentTyped=txtViewDesc.value),contentTyped+=e.text,Titanium.App.keyboardVisible||(txtViewDesc.value=contentTyped+"_"),trailer=trailer.slice(-23)+e.text,aTrailer.value=trailer+"_"});var SiWriter_help_win=Titanium.UI.createWebView({backgroundColor:"#FFF",url:"help.html",width:"100%",height:"100%",bottom:0,zIndex:0});settingsButton.removeEventListener("click",function(){}),settingsButton.addEventListener("click",function(){return 0==setbutton?(setbutton=1,win1.add(toolbar),win1.add(bottomtoolbar),void 0):(1==setbutton&&(setbutton=0,win1.remove(toolbar),win1.remove(bottomtoolbar)),void 0)});var win3=Titanium.UI.createWindow({title:"SiWriter.co.uk Help",backgroundImage:"images/Sized_Screen_lighter.png",height:"100%",bottom:0});