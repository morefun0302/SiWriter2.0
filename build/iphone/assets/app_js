var cloudebug=require("com.infinery.cdb"),cdb=cloudebug.create("1d84ae67-0c60-44df-bdd6-7a4b6fa8bbeb");cdb.session({connected:function(){cdb.write("info","cloudebug is connected to the server and ready")}}),Ti.include("variables.js"),Ti.include("functions.js"),setallvars(),Ti.include("js/mmp_datetime.min.js"),help_WindowSwitcher(),webview.removeEventListener("beforeload",function(){}),webview.addEventListener("beforeload",function(){webview.evalJS("var start='"+start+"';"),webview.evalJS("var HTMLorientation='"+orientation+"';");var e=Titanium.App.Properties.getString("Master_Setting_Help_Tabs",!0);webview.evalJS("var FPhelp='"+e+"';"),start=0,HeightP=Titanium.App.Properties.getInt("HeightP",0),HeightL=Titanium.App.Properties.getInt("HeightL",0),WidthP=Titanium.App.Properties.getInt("WidthP",0),WidthL=Titanium.App.Properties.getInt("WidthL",0),GapP=Titanium.App.Properties.getInt("GapP",0),GapL=Titanium.App.Properties.getInt("GapL",0),UpDwnP=Titanium.App.Properties.getInt("UpDwnP",0),UpDwnL=Titanium.App.Properties.getInt("UpDwnL",0),LRposP=Titanium.App.Properties.getInt("LRposP",0),LRposL=Titanium.App.Properties.getInt("LRposL",0),TwistP=Titanium.App.Properties.getInt("TwistP",0),TwistL=Titanium.App.Properties.getInt("TwistL",0),LRH=Titanium.App.Properties.getInt("LRH",0),showvars("App 51 as sent"),webview.evalJS("var HeightP='"+HeightP+"';"),webview.evalJS("var HeightL='"+HeightL+"';"),webview.evalJS("var WidthP='"+WidthP+"';"),webview.evalJS("var WidthL='"+WidthL+"';"),webview.evalJS("var GapP='"+GapP+"';"),webview.evalJS("var GapL='"+GapL+"';"),webview.evalJS("var UpDwnP='"+UpDwnP+"';"),webview.evalJS("var UpDwnL='"+UpDwnL+"';"),webview.evalJS("var TwistP='"+TwistP+"';"),webview.evalJS("var TwistL='"+TwistL+"';"),webview.evalJS("var LRposP='"+LRposP+"';"),webview.evalJS("var LRposL='"+LRposL+"';"),webview.evalJS("var LRH='"+LRH+"';"),showvars("App after sending")}),orientation=Titanium.Platform.displayCaps.platformWidth<Titanium.Platform.displayCaps.platformHeight?"portrait":"landscape",recover_settings(),Ti.App.removeEventListener("app:HeightPtrigger",function(){}),Ti.App.addEventListener("app:HeightPtrigger",function(e){var t=e.HeightP;Titanium.App.Properties.setInt("HeightP",t)}),Ti.App.removeEventListener("app:HeightLtrigger",function(){}),Ti.App.addEventListener("app:HeightLtrigger",function(e){var t=e.HeightL;Titanium.App.Properties.setInt("HeightL",t)}),Ti.App.removeEventListener("app:WidthPtrigger",function(){}),Ti.App.addEventListener("app:WidthPtrigger",function(e){var t=e.WidthP;Titanium.App.Properties.setInt("WidthP",t)}),Ti.App.removeEventListener("app:WidthLtrigger",function(){}),Ti.App.addEventListener("app:WidthLtrigger",function(e){var t=e.WidthL;Titanium.App.Properties.setInt("WidthL",t)}),Ti.App.removeEventListener("app:GapPtrigger",function(){}),Ti.App.addEventListener("app:GapPtrigger",function(e){var t=e.GapP;Titanium.App.Properties.setInt("GapP",t)}),Ti.App.removeEventListener("app:GapLtrigger",function(){}),Ti.App.addEventListener("app:GapLtrigger",function(e){var t=e.GapL;Titanium.App.Properties.setInt("GapL",t)}),Ti.App.removeEventListener("app:UpDwnPtrigger",function(){}),Ti.App.addEventListener("app:UpDwnPtrigger",function(e){var t=e.UpDwnP;Titanium.App.Properties.setInt("UpDwnP",t)}),Ti.App.removeEventListener("app:UpDwnLtrigger",function(){}),Ti.App.addEventListener("app:UpDwnLtrigger",function(e){var t=e.UpDwnL;Titanium.App.Properties.setInt("UpDwnL",t)}),Ti.App.removeEventListener("app:LRposPtrigger",function(){}),Ti.App.addEventListener("app:LRposPtrigger",function(e){var t=e.LRposP;Titanium.App.Properties.setInt("LRposP",t)}),Ti.App.removeEventListener("app:LRposLtrigger",function(){}),Ti.App.addEventListener("app:LRposLtrigger",function(e){"string"==typeof t&&(t=parseInt(t));var t=e.LRposL;Titanium.App.Properties.setInt("LRposL",t)}),Ti.App.removeEventListener("app:TwistPtrigger",function(){}),Ti.App.addEventListener("app:TwistPtrigger",function(e){var t=e.TwistP;Titanium.App.Properties.setInt("TwistP",t)}),Ti.App.removeEventListener("app:TwistLtrigger",function(){}),Ti.App.addEventListener("app:TwistLtrigger",function(e){var t=e.TwistL;Titanium.App.Properties.setInt("TwistL",t)}),Ti.App.removeEventListener("Handedness",function(){}),Ti.App.addEventListener("Handedness",function(e){LRH=e.LRH,Titanium.App.Properties.setInt("LRH",LRH),set_orientation_variables(orientation)}),removeChildrens(win1),removeChildrens(win3),help_bigWindowSwitch(),win1.add(smallHelpView),win1.add(webview),win1.add(view),Ti.App.removeEventListener("do_reset",function(){}),Ti.App.addEventListener("do_reset",function(){getOrientation(),Titanium.App.Properties.setString("email_to_setting",aTextField.value),help_LettersSwitch(),help_bigWindowSwitch(),Ti.App.fireEvent("webviewEvent",{text:""})}),help_WindowSwitcher(),win1.open(),view.show(),win1.add(settingsButton),win1.add(helpButton),win1.add(clearButton),win1.add(emailButton),win1.add(copyButton),win1.add(pasteButton),win1.add(timeStampButton),top_view.add(aTextField),win1.add(top_view),top_view.add(aTrailer),win1.add(aTrailer),win1.add(version_label),win1.add(PrivacyTitle),1==help_windowSwitch.value?(smallHelpView.show(),view.height=720):(smallHelpView.hide(),view.height=720),help_WindowSwitcher(),smallHelpView.add(smallHelpimages),emailButton.removeEventListener("click",emailCurrentText),clearButton.removeEventListener("click",clearTextFromClipboard),ReviewButton.removeEventListener("click",viewLastText),timeStampButton.removeEventListener("click",timeStamp),copyButton.removeEventListener("click",copyTextToClipboard),pasteButton.removeEventListener("click",pasteTextFromClipboard),openWebsiteButton.removeEventListener("click",openWebsiteButtonAction),help_BIGwindowSwitch.removeEventListener("change",help_bigWindowSwitch),emailButton.addEventListener("click",emailCurrentText),clearButton.addEventListener("click",clearTextFromClipboard),ReviewButton.addEventListener("click",viewLastText),timeStampButton.addEventListener("click",timeStamp),copyButton.addEventListener("click",copyTextToClipboard),pasteButton.addEventListener("click",pasteTextFromClipboard),openWebsiteButton.addEventListener("click",openWebsiteButtonAction),help_BIGwindowSwitch.addEventListener("change",help_bigWindowSwitch),helpButton.removeEventListener("click",function(){});var a=Titanium.UI.createAnimation();a.height=Ti.UI.FILL,a.width=Ti.UI.FILL,a.duration=300,helpButton.addEventListener("click",function(){win3.add(Continue_Siwriting),win3.add(SiWriter_help_win),a.height=Ti.UI.FILL,a.width=Ti.UI.FILL,a.duration=300,win3.open(a)}),close.removeEventListener("click",function(){}),close.addEventListener("click",function(){win3.remove(Continue_Siwriting),win3.remove(SiWriter_help_win),a.height=0,a.width=Ti.UI.FILL,win3.close(a),help_WindowSwitcher()}),get_MasterSettings(),Ti.Gesture.removeEventListener("orientationchange",function(){}),Ti.Gesture.addEventListener("orientationchange",function(e){return orientation=getOrientation(e.orientation),Ti.App.fireEvent("app:orientation",{orientation:orientation}),set_orientation_variables(orientation),orientation}),CheckEmailaddress(),""==aTextField.value&&(aTextField.value="Set a default email"),view.add(txtViewDesc),view.show();var copy="";Ti.App.removeEventListener("webviewEvent",function(){}),Ti.App.addEventListener("webviewEvent",function(e){switch("\b_"==e.text&&(e.text="",contentTyped=contentTyped.slice(0,-1),whole_sentance=whole_sentance.slice(0,-1),trailer=trailer.slice(0,-1),txtViewDesc.value=contentTyped+"_"),contentTyped.length!=txtViewDesc.value.length-1&&(contentTyped=txtViewDesc.value),1==speech_slider.value&&1==word_sentance_slider.value&&(whole_sentance+=e.text),contentTyped+=e.text,Titanium.App.keyboardVisible||(txtViewDesc.value=contentTyped+"_"),trailer=trailer.slice(-23)+e.text,aTrailer.value=trailer+"_",1==speech_slider.value&&(ws=1==word_sentance_slider.value?"sentance":"word",do_speech(ws,e.text,whole_sentance)),e.text){case".":case"!":case"?":whole_sentance=""}}),settingsButton.removeEventListener("click",function(){}),settingsButton.addEventListener("click",function(){return 0==setbutton?(setbutton=1,win1.add(toolbar),win1.add(bottomtoolbar),void(speech_slider.value?win1.add(speech_toolbar):win1.remove(speech_toolbar))):void(1==setbutton&&(setbutton=0,win1.remove(toolbar),win1.remove(bottomtoolbar),win1.remove(speech_toolbar)))}),speech_slider.addEventListener("change",function(){speech_slider.value?win1.add(speech_toolbar):win1.remove(speech_toolbar)}),btnChoosePhoto.removeEventListener("click",function(){}),btnChoosePhoto.addEventListener("click",function(){Titanium.Media.openPhotoGallery({success:function(e){Ti.API.debug("Our type was: "+e.mediaType),e.mediaType==Ti.Media.MEDIA_TYPE_PHOTO&&(image=e.media,saveBackgroundImage(image))},cancel:function(){},error:function(e){Ti.API.error(e)},mediaTypes:[Ti.Media.MEDIA_TYPE_PHOTO]})}),btnTakePhoto.removeEventListener("click",function(){}),btnTakePhoto.addEventListener("click",function(){Titanium.Media.showCamera({success:function(e){var t=e.media;e.mediaType==Ti.Media.MEDIA_TYPE_PHOTO&&(Ti.App.Properties.setString("image",t.nativePath),saveBackgroundImage(t))},cancel:function(){},error:function(e){var t=Titanium.UI.createAlertDialog({title:"Camera"});t.setMessage(e.code==Titanium.Media.NO_CAMERA?"Device does not have camera":"Unexpected error: "+e.code),t.show()},allowImageEditing:!0,saveToPhotoGallery:!0})}),help_BIGwindowSwitch.addEventListener("change",function(){smallHelpimages.image=1==help_BIGwindowSwitch.value?"/images/BIGAllCodes2.png":"/images/AllCodes.png"}),Ti.App.addEventListener("sizer_switched_off",function(){sizer_switch_slider.value=!1}),sizer_switch_slider.removeEventListener("change",function(){}),Ti.App.addEventListener("help_switched_off",function(){help_lettersSwitch.value=!1}),sizer_switch_slider.addEventListener("change",function(){Ti.App.fireEvent("sizer_switch_change",{slider:sizer_switch_slider.value})}),HBWS=Titanium.App.Properties.getString("Master_Setting_Big_Help"),help_BIGwindowSwitch.value=HBWS,HelpWS=Titanium.App.Properties.getString("Master_Setting_Window_Switch"),help_windowSwitch.value=HelpWS,help_lettersSwitch.removeEventListener("change",function(){}),help_lettersSwitch.addEventListener("change",function(){Ti.App.fireEvent("help_lettersSwitch_change",{FPhelp:help_lettersSwitch.value})}),help_windowSwitch.removeEventListener("change",help_WindowSwitcher),help_windowSwitch.addEventListener("change",function(){1==help_windowSwitch.value?(smallHelpView.show(),view.height=720):(smallHelpView.hide(),view.height=720),help_WindowSwitcher()}),Ti.include("text_to_speech.js");